import os
import re
import random
from collections import Counter

# writing is the toggleable variable to write the final project or not
writing = False
overwrite = True
deviate = 5
story_file_name = "Twas_a_Christmas_Story.txt"
homeDir = "C:\\Users\\jgask\\Documents\\Personal\\Christmas2023"
stories = os.listdir(homeDir)
punctuation = [',', '.', "'", ';', '!', '-', '’', '“', '?', '”', '"', ':', '…', '(', ')', '[', ']', 'è']
letters = "[a-zA-Z0-9\\s]"
line_count = 0
story_lines = []
story_sum = 0
story_collection = []
final_story_location = os.path.join(os.getcwd(), story_file_name)
neglected_lines = []
final_story_length = 0
number_list = []
word_sum = 0

for i in range(0, 1000):
    number_list.append(i)

for story in stories:
    story_line_count = 0
    file = os.path.join(homeDir, story)
    with open(file, "r", encoding="utf8") as f:
        for line in f:
            if len(line.rstrip()) > 0:
                line_count += 1
                story_line_count += 1
                story_collection.append(line.rstrip())
    story_lines.append(story_line_count)
for count in story_lines:
    story_sum += count
story_average = story_sum // len(story_lines)
deviation = story_average // deviate
final_deviation = random.randint(0 - deviation, deviation)
project_lines = story_average - final_deviation

if final_story_location and overwrite:
    with open(final_story_location, "w") as f:
        pass

with open(final_story_location, "r") as f:
    for line in f:
        final_story_length += 1


def random_line(total_lines):
    line_number = random.randint(0, total_lines - 1)
    return line_number


# Writes the story if the variable at the top is True
if writing:
    while final_story_length < project_lines:
        append_line_number = random_line(line_count)
        if append_line_number not in neglected_lines:
            neglected_lines.append(append_line_number)
            final_story_length += 1
            with open(final_story_location, "a", encoding="utf8") as f:
                f.write(story_collection[append_line_number].lstrip() + "\n")

word_list = []
for line in story_collection:
    appendable_word = ""
    for letter in line.lstrip():
        if letter == " ":
            word_list.append(appendable_word)
            appendable_word = ""
        else:
            if letter not in punctuation:
                appendable_word += letter.lower()
    word_list.append(appendable_word)

top_n = 100
Counter = Counter(word_list)
verb = ["sing",
        "repeat",
        "born",
        "hail",
        "see",
        "wanna",
        "say",
        "build",
        "rest",
        "stand",
        "tell",
        "bring",
        "stop"]
noun = ["tree",
        "glory",
        "king",
        "snowman",
        "noun",
        "man",
        "newborn",
        "night",
        "noel",
        "hill",
        "reindeer",
        "east",
        "house",
        "bed",
        "lord",
        "air",
        "home",
        "year",
        "wonders",
        "verse",
        "thing"]
pronouns = ["his",
            "i",
            "their",
            "he",
            "they",
            "we",
            "me",
            "you"]
plural_nouns = ["men",
                "toys",
                "bags",
                "hours",
                "stockings"]
proper_nouns = ["christmas",
                "grinch",
                "israel",
                "bethlehem",
                "claus",
                "jesus"]
adjuctives = ["silent",
              "heavenly",
              "quick",
              "tight"]
ignorable_word = ["the",
                  "right",
                  "could",
                  "each",
                  "round",
                  "other",
                  "made",
                  "an",
                  "shall",
                  "ring",
                  "made",
                  "back",
                  "sleep",
                  "found",
                  "coming",
                  "must",
                  "lay",
                  "first",
                  "watching",
                  "even",
                  "too",
                  "knew",
                  "rode",
                  "over",
                  "stood",
                  "if",
                  "till",
                  "stuffed",
                  "ye",
                  "top",
                  "oh",
                  "fun",
                  "wonder",
                  "whole",
                  "gave",
                  "from",
                  "merry",
                  "were",
                  "and",
                  "of",
                  "a",
                  "to",
                  "in",
                  "la",
                  "all",
                  "with",
                  "on",
                  "is",
                  "it",
                  "was",
                  "attend",
                  "guardian",
                  "soft",
                  "drowsy",
                  "creeping",
                  "vale",
                  "slumber",
                  "steeping",
                  "loving",
                  "vigil",
                  "sleeping",
                  "spirit",
                  "gently",
                  "stealing",
                  "revealing",
                  "breathes",
                  "feeling",
                  "slumbers",
                  "surround",
                  "fears",
                  "disarm",
                  "forebodings",
                  "alarm",
                  "peril",
                  "harm",
                  "villagers",
                  "frosty",
                  "tide",
                  "swing",
                  "wide",
                  "draw",
                  "bide",
                  "yours",
                  "sleet",
                  "blowing",
                  "stamping",
                  "greet",
                  "bidding",
                  "half",
                  "sudden",
                  "raining",
                  "benison",
                  "anon",
                  "goodman",
                  "joseph",
                  "toiled",
                  "might",
                  "further",
                  "welcome",
                  "thatch",
                  "litter",
                  "hers",
                  "nowell",
                  "animals",
                  "befell",
                  "theirs",
                  "cottage",
                  "hearth",
                  "glow",
                  "emit",
                  "kinder",
                  "magic",
                  "steals",
                  "passing",
                  "peals",
                  "christmastide",
                  "familiar",
                  "christendom",
                  "unbroken",
                  "revolved",
                  "voice",
                  "chime",
                  "chant",
                  "sublime",
                  "black",
                  "accursed",
                  "cannon",
                  "thundered",
                  "drowned",
                  "earthquake",
                  "rent",
                  "hearthstones",
                  "continent",
                  "forlorn",
                  "households",
                  "despair",
                  "strong",
                  "mocks",
                  "pealed",
                  "loud",
                  "dead",
                  "fail",
                  "prevail",
                  "ermine",
                  "fine",
                  "chrysoprase",
                  "gifts",
                  "precious",
                  "wine",
                  "coats",
                  "lambs",
                  "glorify",
                  "high",
                  "clad",
                  "sings",
                  "knocked",
                  "followed",
                  "after",
                  "begin",
                  "sang",
                  "until",
                  "fell",
                  "asleep",
                  "done",
                  "deck",
                  "hall",
                  "boughs",
                  "holly",
                  "tis",
                  "don",
                  "gay",
                  "apparel",
                  "troll",
                  "carol",
                  "blazing",
                  "yule",
                  "strike",
                  "harp",
                  "chorus",
                  "measure",
                  "treasure",
                  "passes",
                  "lads",
                  "lasses",
                  "heedless",
                  "weather",
                  "lets",
                  "never",
                  "used",
                  "best",
                  "buddies",
                  "wish",
                  "anna",
                  "okay",
                  "bye",
                  "bike",
                  "halls",
                  "company",
                  "overdue",
                  "talking",
                  "pictures",
                  "joan",
                  "gets",
                  "lonely",
                  "rooms",
                  "tick",
                  "elsa",
                  "youre",
                  "asking",
                  "courage",
                  "trying",
                  "gonna",
                  "mercy",
                  "sinners",
                  "reconciled",
                  "rise",
                  "triumph",
                  "angelic",
                  "proclaim",
                  "highest",
                  "adored",
                  "everlasting",
                  "late",
                  "behold",
                  "offspring",
                  "virgins",
                  "womb",
                  "veiled",
                  "flesh",
                  "godhead",
                  "incarnate",
                  "deity",
                  "pleased",
                  "emmanuel",
                  "heavenborn",
                  "righteousness11",
                  "risen",
                  "healing",
                  "lays",
                  "die",
                  "raise",
                  "sons",
                  "herald",
                  "stole",
                  "grinchwho",
                  "lived",
                  "dont",
                  "knows",
                  "screwed",
                  "perhaps",
                  "likely",
                  "whatever",
                  "eve",
                  "hating",
                  "staring",
                  "cave",
                  "sour",
                  "frown",
                  "lighted",
                  "busy",
                  "mistletoe",
                  "snarled",
                  "sneer",
                  "practically",
                  "growled",
                  "nervously",
                  "drumming",
                  "girls",
                  "boys",
                  "wake",
                  "early",
                  "rush",
                  "sit",
                  "rare",
                  "whoroast",
                  "handinhand",
                  "start",
                  "christmassing",
                  "fiftythree",
                  "throat",
                  "chuckled",
                  "clucked",
                  "trick",
                  "saint",
                  "need",
                  "since",
                  "scarce",
                  "none",
                  "cant",
                  "instead",
                  "dog",
                  "red",
                  "thread",
                  "tied",
                  "big",
                  "horn",
                  "loaded",
                  "sacks",
                  "ramshackle",
                  "hitched",
                  "giddap",
                  "toward",
                  "dark",
                  "quiet",
                  "dreaming",
                  "dreams",
                  "square",
                  "number",
                  "hissed",
                  "climbed",
                  "fist",
                  "slid",
                  "rather",
                  "pinch",
                  "santa",
                  "once",
                  "fireplace",
                  "flue",
                  "row",
                  "things",
                  "slithered",
                  "smile",
                  "unpleasant",
                  "present",
                  "pop",
                  "guns",
                  "bicycles",
                  "roller",
                  "skates",
                  "drums",
                  "checkerboards",
                  "tricycles",
                  "popcorn",
                  "nimbly",
                  "cleaned",
                  "can",
                  "whohash",
                  "stuff",
                  "grabbed",
                  "shove",
                  "coo",
                  "dove",
                  "caught",
                  "daughter",
                  "whod",
                  "water",
                  "smart",
                  "slick",
                  "lie",
                  "tot",
                  "fake",
                  "lied",
                  "theres",
                  "wont",
                  "workshop",
                  "dear",
                  "fix",
                  "fib",
                  "fooled",
                  "patted",
                  "drink",
                  "log",
                  "liar",
                  "hooks",
                  "wire",
                  "speck",
                  "crumb",
                  "houses",
                  "leaving",
                  "crumbs",
                  "mouses",
                  "quarter",
                  "past",
                  "abed",
                  "sled",
                  "wrappings",
                  "tinsel",
                  "trimmings",
                  "trappings",
                  "mt",
                  "crumpit",
                  "tiptop",
                  "dump",
                  "poohpooh",
                  "grinchishly",
                  "humming",
                  "finding",
                  "waking",
                  "theyll",
                  "mouths",
                  "boohoo",
                  "hand",
                  "ear",
                  "sounded",
                  "popped",
                  "shocking",
                  "surprise",
                  "somehow",
                  "grinchfeet",
                  "icecold",
                  "packages",
                  "boxes",
                  "puzzled",
                  "puzzler",
                  "sore",
                  "store",
                  "christmasperhapsmeans",
                  "bit",
                  "happened",
                  "wellin",
                  "grinchs",
                  "grew",
                  "didnt",
                  "feel",
                  "whizzed",
                  "carved",
                  "glorious",
                  "touch",
                  "harps",
                  "heavens",
                  "allgracious",
                  "solemn",
                  "stillness",
                  "cloven",
                  "peaceful",
                  "unfurled",
                  "music",
                  "floats",
                  "lowly",
                  "bend",
                  "hovering",
                  "babel",
                  "sounds",
                  "blessd",
                  "woes",
                  "sin",
                  "suffered",
                  "angelstrain",
                  "war",
                  "hears",
                  "lovesong",
                  "hush",
                  "lifes",
                  "crushing",
                  "forms",
                  "toil",
                  "climbing",
                  "painful",
                  "steps",
                  "slow",
                  "swiftly",
                  "road",
                  "days",
                  "hastening",
                  "prophet",
                  "bards",
                  "evercircling",
                  "age",
                  "splendors",
                  "fling",
                  "dashing",
                  "laughing",
                  "bobtail",
                  "making",
                  "spirits",
                  "sleighing",
                  "tonight",
                  "ago",
                  "id",
                  "take",
                  "miss",
                  "fanny",
                  "seated",
                  "horse",
                  "lean",
                  "lank",
                  "misfortune",
                  "seemed",
                  "bank",
                  "upsot",
                  "1",
                  "receive",
                  "prepare",
                  "2",
                  "reigns",
                  "employ",
                  "floods",
                  "rocks",
                  "hills",
                  "3",
                  "sins",
                  "sorrows",
                  "thorns",
                  "infest",
                  "ground",
                  "blessings",
                  "4",
                  "rules",
                  "truth",
                  "prove",
                  "righteousness",
                  "summertime",
                  "prime",
                  "both",
                  "green",
                  "summers",
                  "coldest",
                  "biddst",
                  "faithfully",
                  "trust",
                  "unchangingly",
                  "bough",
                  "hold",
                  "toy",
                  "sparkle",
                  "calm",
                  "yon",
                  "virgin",
                  "infant",
                  "tender",
                  "quake",
                  "stream",
                  "afar",
                  "hosts",
                  "alleluia",
                  "son",
                  "loves",
                  "radiant",
                  "redeeming",
                  "footprints",
                  "gleaming",
                  "cubs",
                  "den",
                  "family",
                  "sleeps",
                  "springtime",
                  "again",
                  "leads",
                  "rabbit",
                  "hole",
                  "bunnies",
                  "snack",
                  "mole",
                  "deer",
                  "prints",
                  "brush",
                  "wood",
                  "fawns",
                  "cuddle",
                  "moms",
                  "forest",
                  "blanket",
                  "creatures",
                  "bethlehems",
                  "sheep",
                  "beyond",
                  "beauty",
                  "country",
                  "sought",
                  "intent",
                  "whereer",
                  "drawing",
                  "nigh",
                  "northwest",
                  "learnt",
                  "cause",
                  "riding",
                  "melchior",
                  "gaspar",
                  "travelled",
                  "slept",
                  "large",
                  "became",
                  "mist",
                  "atmosphere",
                  "prophecy",
                  "saddlebows",
                  "keys",
                  "robes",
                  "crimson",
                  "silk",
                  "rows",
                  "pomegranates",
                  "furbelows",
                  "turbans",
                  "blossoming",
                  "almondtrees",
                  "west",
                  "dusk",
                  "dell",
                  "nodded",
                  "talked",
                  "met",
                  "wayside",
                  "well",
                  "pray",
                  "news",
                  "seen",
                  "worship",
                  "jews",
                  "answered",
                  "vain",
                  "insane",
                  "spurred",
                  "across",
                  "plain",
                  "riders",
                  "haste",
                  "cannot",
                  "wait",
                  "jerusalem",
                  "questioned",
                  "unto",
                  "tidings",
                  "gray",
                  "morn",
                  "yes",
                  "own",
                  "free",
                  "david",
                  "guard",
                  "neighed",
                  "innyard",
                  "closed",
                  "barred",
                  "burned",
                  "cradled",
                  "scented",
                  "hay",
                  "kine",
                  "manger",
                  "kingdom",
                  "human",
                  "divine",
                  "nazareth",
                  "terror",
                  "death",
                  "mingled",
                  "laid",
                  "offerings",
                  "tribute",
                  "frankincense",
                  "odor",
                  "priest",
                  "paraclete",
                  "myrrh",
                  "bodys",
                  "burying",
                  "wondered",
                  "statue",
                  "stone",
                  "troubled",
                  "comforted",
                  "remembering",
                  "angel",
                  "endless",
                  "reign",
                  "davids",
                  "throne",
                  "hoofs",
                  "proud",
                  "array",
                  "malice",
                  "feared",
                  "returned",
                  "another",
                  "creature",
                  "stirring",
                  "hopes",
                  "children",
                  "nestled",
                  "snug",
                  "beds",
                  "sugar",
                  "danced",
                  "heads",
                  "mamma",
                  "kerchief",
                  "cap",
                  "settled",
                  "brains",
                  "winters",
                  "nap",
                  "lawn",
                  "arose",
                  "matter",
                  "window",
                  "tore",
                  "shutters",
                  "threw",
                  "sash",
                  "fallen",
                  "lustre",
                  "midday",
                  "objects",
                  "wondering",
                  "appear",
                  "miniature",
                  "eight",
                  "driver",
                  "lively",
                  "rapid",
                  "eagles",
                  "whistled",
                  "shouted",
                  "name",
                  "dasher",
                  "dancer",
                  "prancer",
                  "vixen",
                  "comet",
                  "cupid",
                  "donder",
                  "blitzen",
                  "porch",
                  "wall",
                  "dry",
                  "hurricane",
                  "fly",
                  "meet",
                  "obstacle",
                  "mount",
                  "twinkling",
                  "prancing",
                  "pawing",
                  "hoof",
                  "drew",
                  "turning",
                  "bound",
                  "fur",
                  "foot",
                  "clothes",
                  "tarnished",
                  "ashes",
                  "soot",
                  "bundle",
                  "flung",
                  "peddler",
                  "opening",
                  "pack",
                  "twinkled",
                  "dimples",
                  "cheeks",
                  "roses",
                  "cherry",
                  "droll",
                  "drawn",
                  "bow",
                  "chin",
                  "stump",
                  "pipe",
                  "held",
                  "teeth",
                  "smoke",
                  "encircled",
                  "broad",
                  "belly",
                  "bowl",
                  "jelly",
                  "chubby",
                  "plump",
                  "elf",
                  "spite",
                  "myself",
                  "wink",
                  "eye",
                  "twist",
                  "dread",
                  "spoke",
                  "word",
                  "straight",
                  "work",
                  "jerk",
                  "laying",
                  "finger",
                  "aside",
                  "giving",
                  "nod",
                  "team",
                  "whistle",
                  "thistle",
                  "exclaim",
                  "drove",
                  "happy",
                  "goodnight",
                  "o",
                  "as",
                  "so",
                  "when",
                  "its",
                  "not",
                  "by",
                  "but",
                  "no",
                  "had",
                  "or",
                  "fa",
                  "up",
                  "for",
                  "that",
                  "then",
                  "through",
                  "just",
                  "snow",
                  "thy",
                  "are",
                  "be",
                  "this",
                  "send",
                  "keeping",
                  "moon",
                  "watch",
                  "weary",
                  "visions",
                  "delight",
                  "pure",
                  "ever",
                  "close",
                  "should",
                  "your",
                  "doors",
                  "though",
                  "wind",
                  "may",
                  "follow",
                  "beside",
                  "yet",
                  "fire",
                  "cold",
                  "fingers",
                  "feet",
                  "street",
                  "ere",
                  "gone",
                  "has",
                  "led",
                  "bliss",
                  "tomorrow",
                  "stable",
                  "low",
                  "mary",
                  "she",
                  "below",
                  "cry",
                  "dwell",
                  "silver",
                  "seem",
                  "throw",
                  "cares",
                  "bringing",
                  "young",
                  "meek",
                  "bold",
                  "ding",
                  "dong",
                  "caroling",
                  "seems",
                  "words",
                  "evrywhere",
                  "filling",
                  "pound",
                  "raising",
                  "dale",
                  "telling",
                  "tale",
                  "gaily",
                  "songs",
                  "onward",
                  "end",
                  "tone",
                  "evry",
                  "dingdong",
                  "beams",
                  "warm",
                  "candles",
                  "stars",
                  "above",
                  "drifted",
                  "sky",
                  "glad",
                  "belfries",
                  "joyous",
                  "carols",
                  "play",
                  "wild",
                  "rolled",
                  "along",
                  "ringing",
                  "singing",
                  "mouth",
                  "south",
                  "bowed",
                  "hate",
                  "deep",
                  "nor",
                  "doth",
                  "wrong",
                  "dressed",
                  "bore",
                  "north",
                  "brown",
                  "brought",
                  "any",
                  "wrapped",
                  "white",
                  "wings",
                  "lo",
                  "host",
                  "upon",
                  "door",
                  "entered",
                  "rising",
                  "sun",
                  "season",
                  "jolly",
                  "ancient",
                  "join",
                  "fast",
                  "new",
                  "together",
                  "",
                  "youve",
                  "doesnt",
                  "think",
                  "ive",
                  "walls",
                  "hang",
                  "these",
                  "empty",
                  "please",
                  "been",
                  "im",
                  "heraldangels",
                  "mild",
                  "nations",
                  "skies",
                  "time",
                  "prince",
                  "life",
                  "brings",
                  "give",
                  "second",
                  "birth",
                  "liked",
                  "lot",
                  "hated",
                  "ask",
                  "quite",
                  "reason",
                  "wasnt",
                  "shoes",
                  "most",
                  "sizes",
                  "grinchy",
                  "windows",
                  "town",
                  "beneath",
                  "hanging",
                  "wreath",
                  "theyre",
                  "find",
                  "thats",
                  "whopudding",
                  "beast",
                  "which",
                  "something",
                  "couldnt",
                  "least",
                  "tall",
                  "years",
                  "put",
                  "idea",
                  "awful",
                  "wonderful",
                  "laughed",
                  "santy",
                  "hat",
                  "coat",
                  "look",
                  "nick",
                  "looked",
                  "simply",
                  "ill",
                  "make",
                  "called",
                  "max",
                  "homes",
                  "asnooze",
                  "filled",
                  "care",
                  "roof",
                  "stuck",
                  "moment",
                  "hung",
                  "grinned",
                  "slunk",
                  "room",
                  "plums",
                  "very",
                  "icebox",
                  "roast",
                  "flash",
                  "last",
                  "food",
                  "glee",
                  "turned",
                  "cindylou",
                  "than",
                  "tiny",
                  "cup",
                  "stared",
                  "taking",
                  "side",
                  "sent",
                  "himself",
                  "left",
                  "nothing",
                  "mouse",
                  "same",
                  "much",
                  "dawn",
                  "packed",
                  "presents",
                  "ribbons",
                  "tags",
                  "thousand",
                  "load",
                  "minute",
                  "paused",
                  "grow",
                  "sad",
                  "eyes",
                  "shook",
                  "hadnt",
                  "stopped",
                  "puzzling",
                  "maybe",
                  "midnight",
                  "clear",
                  "bending",
                  "near",
                  "plains",
                  "wing",
                  "strife",
                  "long",
                  "whose",
                  "golden",
                  "foretold",
                  "comes",
                  "fields",
                  "soon",
                  "into",
                  "nature",
                  "savior",
                  "sounding",
                  "flow",
                  "curse",
                  "grace",
                  "makes",
                  "glories",
                  "love",
                  "leaves",
                  "verdant",
                  "winter",
                  "pleasure",
                  "dost",
                  "thou",
                  "lovely",
                  "branches",
                  "sturdy",
                  "hath",
                  "place",
                  "shine",
                  "brightly",
                  "mother",
                  "sight",
                  "face",
                  "those",
                  "set",
                  "lead",
                  "bear",
                  "stay",
                  "rose",
                  "such",
                  "guide",
                  "baltasar",
                  "beautiful",
                  "caskets",
                  "sometimes",
                  "beard",
                  "breast",
                  "ridden",
                  "herod",
                  "horses",
                  "city",
                  "gate",
                  "breath",
                  "sat",
                  "clatter",
                  "twas",
                  "nicholas",
                  "sprang",
                  "flew",
                  "coursers",
                  "dash",
                  "full",
                  "nose",
                  "st",
                  "onehorse"]
top_n = top_n + len(ignorable_word) + len(pronouns)
most_occur = Counter.most_common(top_n)
for set_of_count in most_occur:
    n = set_of_count[0]
    if n not in ignorable_word and\
            n not in pronouns and\
            n not in proper_nouns and\
            n not in verb and\
            n not in noun and\
            n not in plural_nouns and\
            n not in adjuctives:
        print(set_of_count)
        word_sum += 1
print(word_sum)

# I am attempting to create a list of characters that are just punctuation
# for story in stories:
#     file = os.path.join(homeDir, story)
#     with open(file, "r", encoding="utf8") as f:
#         for line in f:
#             for letter in line.rstrip():
#                 if not re.search(letters, letter):
#                     if letter not in punctuation:
#                         punctuation.append(letter)
# print(punctuation)
